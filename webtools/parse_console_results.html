<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flatbuffer Decoder</title>
    <script src="
    https://cdn.jsdelivr.net/npm/flatbuffers@24.3.25/js/flatbuffers.min.js
    "></script>

    <script>
        // automatically generated by the FlatBuffers compiler, do not modify

        /**
         * @const
         * @namespace
         */
        var NeuralaRecognizer = NeuralaRecognizer || {};

        /**
         * @constructor
         */
        NeuralaRecognizer.HifiResults = function () {
            /**
             * @type {flatbuffers.ByteBuffer}
             */
            this.bb = null;

            /**
             * @type {number}
             */
            this.bb_pos = 0;
        };

        /**
         * @param {number} i
         * @param {flatbuffers.ByteBuffer} bb
         * @returns {NeuralaRecognizer.HifiResults}
         */
        NeuralaRecognizer.HifiResults.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {NeuralaRecognizer.HifiResults=} obj
         * @returns {NeuralaRecognizer.HifiResults}
         */
        NeuralaRecognizer.HifiResults.getRootAsHifiResults = function (bb, obj) {
            return (obj || new NeuralaRecognizer.HifiResults).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {NeuralaRecognizer.HifiResults=} obj
         * @returns {NeuralaRecognizer.HifiResults}
         */
        NeuralaRecognizer.HifiResults.getSizePrefixedRootAsHifiResults = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new NeuralaRecognizer.HifiResults).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @returns {number}
         */
        NeuralaRecognizer.HifiResults.prototype.width = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.readUint32(this.bb_pos + offset) : 0;
        };

        /**
         * @returns {number}
         */
        NeuralaRecognizer.HifiResults.prototype.height = function () {
            var offset = this.bb.__offset(this.bb_pos, 6);
            return offset ? this.bb.readUint32(this.bb_pos + offset) : 0;
        };

        /**
         * @returns {number}
         */
        NeuralaRecognizer.HifiResults.prototype.anomalyScore = function () {
            var offset = this.bb.__offset(this.bb_pos, 8);
            return offset ? this.bb.readFloat32(this.bb_pos + offset) : 0.0;
        };

        /**
         * @param {number} index
         * @returns {number}
         */
        NeuralaRecognizer.HifiResults.prototype.heatmap = function (index) {
            var offset = this.bb.__offset(this.bb_pos, 10);
            return offset ? this.bb.readFloat32(this.bb.__vector(this.bb_pos + offset) + index * 4) : 0;
        };

        /**
         * @returns {number}
         */
        NeuralaRecognizer.HifiResults.prototype.heatmapLength = function () {
            var offset = this.bb.__offset(this.bb_pos, 10);
            return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;
        };

        /**
         * @returns {Float32Array}
         */
        NeuralaRecognizer.HifiResults.prototype.heatmapArray = function () {
            var offset = this.bb.__offset(this.bb_pos, 10);
            return offset ? new Float32Array(this.bb.bytes().buffer, this.bb.bytes().byteOffset + this.bb.__vector(this.bb_pos + offset), this.bb.__vector_len(this.bb_pos + offset)) : null;
        };

        /**
         * @param {flatbuffers.Builder} builder
         */
        NeuralaRecognizer.HifiResults.startHifiResults = function (builder) {
            builder.startObject(4);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} width
         */
        NeuralaRecognizer.HifiResults.addWidth = function (builder, width) {
            builder.addFieldInt32(0, width, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} height
         */
        NeuralaRecognizer.HifiResults.addHeight = function (builder, height) {
            builder.addFieldInt32(1, height, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} anomalyScore
         */
        NeuralaRecognizer.HifiResults.addAnomalyScore = function (builder, anomalyScore) {
            builder.addFieldFloat32(2, anomalyScore, 0.0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} heatmapOffset
         */
        NeuralaRecognizer.HifiResults.addHeatmap = function (builder, heatmapOffset) {
            builder.addFieldOffset(3, heatmapOffset, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {Array.<number>} data
         * @returns {flatbuffers.Offset}
         */
        NeuralaRecognizer.HifiResults.createHeatmapVector = function (builder, data) {
            builder.startVector(4, data.length, 4);
            for (var i = data.length - 1; i >= 0; i--) {
                builder.addFloat32(data[i]);
            }
            return builder.endVector();
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} numElems
         */
        NeuralaRecognizer.HifiResults.startHeatmapVector = function (builder, numElems) {
            builder.startVector(4, numElems, 4);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @returns {flatbuffers.Offset}
         */
        NeuralaRecognizer.HifiResults.endHifiResults = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} offset
         */
        NeuralaRecognizer.HifiResults.finishHifiResultsBuffer = function (builder, offset) {
            builder.finish(offset);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} offset
         */
        NeuralaRecognizer.HifiResults.finishSizePrefixedHifiResultsBuffer = function (builder, offset) {
            builder.finish(offset, undefined, true);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} width
         * @param {number} height
         * @param {number} anomalyScore
         * @param {flatbuffers.Offset} heatmapOffset
         * @returns {flatbuffers.Offset}
         */
        NeuralaRecognizer.HifiResults.createHifiResults = function (builder, width, height, anomalyScore, heatmapOffset) {
            NeuralaRecognizer.HifiResults.startHifiResults(builder);
            NeuralaRecognizer.HifiResults.addWidth(builder, width);
            NeuralaRecognizer.HifiResults.addHeight(builder, height);
            NeuralaRecognizer.HifiResults.addAnomalyScore(builder, anomalyScore);
            NeuralaRecognizer.HifiResults.addHeatmap(builder, heatmapOffset);
            return NeuralaRecognizer.HifiResults.endHifiResults(builder);
        }

        // Exports for Node.js and RequireJS
        this.NeuralaRecognizer = NeuralaRecognizer;
    </script>
    <script>
        // automatically generated by the FlatBuffers compiler, do not modify

        /**
         * @const
         * @namespace
         */
        var SmartCamera = SmartCamera || {};

        /**
         * @constructor
         */
        SmartCamera.GeneralClassification = function () {
            /**
             * @type {flatbuffers.ByteBuffer}
             */
            this.bb = null;

            /**
             * @type {number}
             */
            this.bb_pos = 0;
        };

        /**
         * @param {number} i
         * @param {flatbuffers.ByteBuffer} bb
         * @returns {SmartCamera.GeneralClassification}
         */
        SmartCamera.GeneralClassification.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.GeneralClassification=} obj
         * @returns {SmartCamera.GeneralClassification}
         */
        SmartCamera.GeneralClassification.getRootAsGeneralClassification = function (bb, obj) {
            return (obj || new SmartCamera.GeneralClassification).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.GeneralClassification=} obj
         * @returns {SmartCamera.GeneralClassification}
         */
        SmartCamera.GeneralClassification.getSizePrefixedRootAsGeneralClassification = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.GeneralClassification).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @returns {number}
         */
        SmartCamera.GeneralClassification.prototype.classId = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.readUint32(this.bb_pos + offset) : 0;
        };

        /**
         * @returns {number}
         */
        SmartCamera.GeneralClassification.prototype.score = function () {
            var offset = this.bb.__offset(this.bb_pos, 6);
            return offset ? this.bb.readFloat32(this.bb_pos + offset) : 0.0;
        };

        /**
         * @param {flatbuffers.Builder} builder
         */
        SmartCamera.GeneralClassification.startGeneralClassification = function (builder) {
            builder.startObject(2);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} classId
         */
        SmartCamera.GeneralClassification.addClassId = function (builder, classId) {
            builder.addFieldInt32(0, classId, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} score
         */
        SmartCamera.GeneralClassification.addScore = function (builder, score) {
            builder.addFieldFloat32(1, score, 0.0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.GeneralClassification.endGeneralClassification = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} classId
         * @param {number} score
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.GeneralClassification.createGeneralClassification = function (builder, classId, score) {
            SmartCamera.GeneralClassification.startGeneralClassification(builder);
            SmartCamera.GeneralClassification.addClassId(builder, classId);
            SmartCamera.GeneralClassification.addScore(builder, score);
            return SmartCamera.GeneralClassification.endGeneralClassification(builder);
        }

        /**
         * @constructor
         */
        SmartCamera.ClassificationData = function () {
            /**
             * @type {flatbuffers.ByteBuffer}
             */
            this.bb = null;

            /**
             * @type {number}
             */
            this.bb_pos = 0;
        };

        /**
         * @param {number} i
         * @param {flatbuffers.ByteBuffer} bb
         * @returns {SmartCamera.ClassificationData}
         */
        SmartCamera.ClassificationData.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.ClassificationData=} obj
         * @returns {SmartCamera.ClassificationData}
         */
        SmartCamera.ClassificationData.getRootAsClassificationData = function (bb, obj) {
            return (obj || new SmartCamera.ClassificationData).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.ClassificationData=} obj
         * @returns {SmartCamera.ClassificationData}
         */
        SmartCamera.ClassificationData.getSizePrefixedRootAsClassificationData = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.ClassificationData).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {number} index
         * @param {SmartCamera.GeneralClassification=} obj
         * @returns {SmartCamera.GeneralClassification}
         */
        SmartCamera.ClassificationData.prototype.classificationList = function (index, obj) {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? (obj || new SmartCamera.GeneralClassification).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos + offset) + index * 4), this.bb) : null;
        };

        /**
         * @returns {number}
         */
        SmartCamera.ClassificationData.prototype.classificationListLength = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;
        };

        /**
         * @param {flatbuffers.Builder} builder
         */
        SmartCamera.ClassificationData.startClassificationData = function (builder) {
            builder.startObject(1);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} classificationListOffset
         */
        SmartCamera.ClassificationData.addClassificationList = function (builder, classificationListOffset) {
            builder.addFieldOffset(0, classificationListOffset, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {Array.<flatbuffers.Offset>} data
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.ClassificationData.createClassificationListVector = function (builder, data) {
            builder.startVector(4, data.length, 4);
            for (var i = data.length - 1; i >= 0; i--) {
                builder.addOffset(data[i]);
            }
            return builder.endVector();
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {number} numElems
         */
        SmartCamera.ClassificationData.startClassificationListVector = function (builder, numElems) {
            builder.startVector(4, numElems, 4);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.ClassificationData.endClassificationData = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} classificationListOffset
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.ClassificationData.createClassificationData = function (builder, classificationListOffset) {
            SmartCamera.ClassificationData.startClassificationData(builder);
            SmartCamera.ClassificationData.addClassificationList(builder, classificationListOffset);
            return SmartCamera.ClassificationData.endClassificationData(builder);
        }

        /**
         * @constructor
         */
        SmartCamera.ClassificationTop = function () {
            /**
             * @type {flatbuffers.ByteBuffer}
             */
            this.bb = null;

            /**
             * @type {number}
             */
            this.bb_pos = 0;
        };

        /**
         * @param {number} i
         * @param {flatbuffers.ByteBuffer} bb
         * @returns {SmartCamera.ClassificationTop}
         */
        SmartCamera.ClassificationTop.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.ClassificationTop=} obj
         * @returns {SmartCamera.ClassificationTop}
         */
        SmartCamera.ClassificationTop.getRootAsClassificationTop = function (bb, obj) {
            return (obj || new SmartCamera.ClassificationTop).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {flatbuffers.ByteBuffer} bb
         * @param {SmartCamera.ClassificationTop=} obj
         * @returns {SmartCamera.ClassificationTop}
         */
        SmartCamera.ClassificationTop.getSizePrefixedRootAsClassificationTop = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.ClassificationTop).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
         * @param {SmartCamera.ClassificationData=} obj
         * @returns {SmartCamera.ClassificationData|null}
         */
        SmartCamera.ClassificationTop.prototype.perception = function (obj) {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? (obj || new SmartCamera.ClassificationData).__init(this.bb.__indirect(this.bb_pos + offset), this.bb) : null;
        };

        /**
         * @param {flatbuffers.Builder} builder
         */
        SmartCamera.ClassificationTop.startClassificationTop = function (builder) {
            builder.startObject(1);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} perceptionOffset
         */
        SmartCamera.ClassificationTop.addPerception = function (builder, perceptionOffset) {
            builder.addFieldOffset(0, perceptionOffset, 0);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.ClassificationTop.endClassificationTop = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} offset
         */
        SmartCamera.ClassificationTop.finishClassificationTopBuffer = function (builder, offset) {
            builder.finish(offset);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} offset
         */
        SmartCamera.ClassificationTop.finishSizePrefixedClassificationTopBuffer = function (builder, offset) {
            builder.finish(offset, undefined, true);
        };

        /**
         * @param {flatbuffers.Builder} builder
         * @param {flatbuffers.Offset} perceptionOffset
         * @returns {flatbuffers.Offset}
         */
        SmartCamera.ClassificationTop.createClassificationTop = function (builder, perceptionOffset) {
            SmartCamera.ClassificationTop.startClassificationTop(builder);
            SmartCamera.ClassificationTop.addPerception(builder, perceptionOffset);
            return SmartCamera.ClassificationTop.endClassificationTop(builder);
        }

        // Exports for Node.js and RequireJS
        this.SmartCamera = SmartCamera;
    </script>
    <script>
        // automatically generated by the FlatBuffers compiler, do not modify

        /**
        * @const
        * @namespace
        */
        var SmartCamera = SmartCamera || {};

        /**
        * @enum {number}
                */
        SmartCamera.BoundingBox = {
            NONE: 0,
            BoundingBox2d: 1
        };

        /**
        * @enum {string}
                */
        SmartCamera.BoundingBoxName = {
            '0': 'NONE',
            '1': 'BoundingBox2d'
        };

        /**
        * @constructor
        */
        SmartCamera.BoundingBox2d = function () {
            /**
            * @type {flatbuffers.ByteBuffer}
            */
            this.bb = null;

            /**
            * @type {number}
                    */
            this.bb_pos = 0;
        };

        /**
        * @param {number} i
                * @param {flatbuffers.ByteBuffer} bb
                * @returns {SmartCamera.BoundingBox2d}
                */
        SmartCamera.BoundingBox2d.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.BoundingBox2d =} obj
                * @returns {SmartCamera.BoundingBox2d}
                */
        SmartCamera.BoundingBox2d.getRootAsBoundingBox2d = function (bb, obj) {
            return (obj || new SmartCamera.BoundingBox2d).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.BoundingBox2d =} obj
                * @returns {SmartCamera.BoundingBox2d}
                */
        SmartCamera.BoundingBox2d.getSizePrefixedRootAsBoundingBox2d = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.BoundingBox2d).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @returns {number}
                */
        SmartCamera.BoundingBox2d.prototype.left = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;
        };

        /**
        * @returns {number}
                */
        SmartCamera.BoundingBox2d.prototype.top = function () {
            var offset = this.bb.__offset(this.bb_pos, 6);
            return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;
        };

        /**
        * @returns {number}
                */
        SmartCamera.BoundingBox2d.prototype.right = function () {
            var offset = this.bb.__offset(this.bb_pos, 8);
            return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;
        };

        /**
        * @returns {number}
                */
        SmartCamera.BoundingBox2d.prototype.bottom = function () {
            var offset = this.bb.__offset(this.bb_pos, 10);
            return offset ? this.bb.readInt32(this.bb_pos + offset) : 0;
        };

        /**
        * @param {flatbuffers.Builder} builder
                */
        SmartCamera.BoundingBox2d.startBoundingBox2d = function (builder) {
            builder.startObject(4);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} left
                */
        SmartCamera.BoundingBox2d.addLeft = function (builder, left) {
            builder.addFieldInt32(0, left, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} top
                */
        SmartCamera.BoundingBox2d.addTop = function (builder, top) {
            builder.addFieldInt32(1, top, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} right
                */
        SmartCamera.BoundingBox2d.addRight = function (builder, right) {
            builder.addFieldInt32(2, right, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} bottom
                */
        SmartCamera.BoundingBox2d.addBottom = function (builder, bottom) {
            builder.addFieldInt32(3, bottom, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @returns {flatbuffers.Offset}
                */
        SmartCamera.BoundingBox2d.endBoundingBox2d = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} left
                * @param {number} top
                * @param {number} right
                * @param {number} bottom
                * @returns {flatbuffers.Offset}
                */
        SmartCamera.BoundingBox2d.createBoundingBox2d = function (builder, left, top, right, bottom) {
            SmartCamera.BoundingBox2d.startBoundingBox2d(builder);
            SmartCamera.BoundingBox2d.addLeft(builder, left);
            SmartCamera.BoundingBox2d.addTop(builder, top);
            SmartCamera.BoundingBox2d.addRight(builder, right);
            SmartCamera.BoundingBox2d.addBottom(builder, bottom);
            return SmartCamera.BoundingBox2d.endBoundingBox2d(builder);
        }

        /**
        * @constructor
        */
        SmartCamera.GeneralObject = function () {
            /**
            * @type {flatbuffers.ByteBuffer}
            */
            this.bb = null;

            /**
            * @type {number}
                    */
            this.bb_pos = 0;
        };

        /**
        * @param {number} i
                * @param {flatbuffers.ByteBuffer} bb
                * @returns {SmartCamera.GeneralObject}
                */
        SmartCamera.GeneralObject.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.GeneralObject =} obj
                * @returns {SmartCamera.GeneralObject}
                */
        SmartCamera.GeneralObject.getRootAsGeneralObject = function (bb, obj) {
            return (obj || new SmartCamera.GeneralObject).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.GeneralObject =} obj
                * @returns {SmartCamera.GeneralObject}
                */
        SmartCamera.GeneralObject.getSizePrefixedRootAsGeneralObject = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.GeneralObject).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @returns {number}
                */
        SmartCamera.GeneralObject.prototype.classId = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.readUint32(this.bb_pos + offset) : 0;
        };

        /**
        * @returns {SmartCamera.BoundingBox}
                */
        SmartCamera.GeneralObject.prototype.boundingBoxType = function () {
            var offset = this.bb.__offset(this.bb_pos, 6);
            return offset ? /** @type {SmartCamera.BoundingBox} */ (this.bb.readUint8(this.bb_pos + offset)) :
                SmartCamera.BoundingBox.NONE;
        };

        /**
        * @param {flatbuffers.Table} obj
                * @returns {? flatbuffers.Table}
                */
        SmartCamera.GeneralObject.prototype.boundingBox = function (obj) {
            var offset = this.bb.__offset(this.bb_pos, 8);
            return offset ? this.bb.__union(obj, this.bb_pos + offset) : null;
        };

        /**
        * @returns {number}
                */
        SmartCamera.GeneralObject.prototype.score = function () {
            var offset = this.bb.__offset(this.bb_pos, 10);
            return offset ? this.bb.readFloat32(this.bb_pos + offset) : 0.0;
        };

        /**
        * @param {flatbuffers.Builder} builder
                */
        SmartCamera.GeneralObject.startGeneralObject = function (builder) {
            builder.startObject(4);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} classId
                */
        SmartCamera.GeneralObject.addClassId = function (builder, classId) {
            builder.addFieldInt32(0, classId, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {SmartCamera.BoundingBox} boundingBoxType
                */
        SmartCamera.GeneralObject.addBoundingBoxType = function (builder, boundingBoxType) {
            builder.addFieldInt8(1, boundingBoxType, SmartCamera.BoundingBox.NONE);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {flatbuffers.Offset} boundingBoxOffset
                */
        SmartCamera.GeneralObject.addBoundingBox = function (builder, boundingBoxOffset) {
            builder.addFieldOffset(2, boundingBoxOffset, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} score
                */
        SmartCamera.GeneralObject.addScore = function (builder, score) {
            builder.addFieldFloat32(3, score, 0.0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @returns {flatbuffers.Offset}
                */
        SmartCamera.GeneralObject.endGeneralObject = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {number} classId
                * @param {SmartCamera.BoundingBox} boundingBoxType
                * @param {flatbuffers.Offset} boundingBoxOffset
                * @param {number} score
                * @returns {flatbuffers.Offset}
                */
        SmartCamera.GeneralObject.createGeneralObject = function (builder, classId, boundingBoxType, boundingBoxOffset,
            score) {
            SmartCamera.GeneralObject.startGeneralObject(builder);
            SmartCamera.GeneralObject.addClassId(builder, classId);
            SmartCamera.GeneralObject.addBoundingBoxType(builder, boundingBoxType);
            SmartCamera.GeneralObject.addBoundingBox(builder, boundingBoxOffset);
            SmartCamera.GeneralObject.addScore(builder, score);
            return SmartCamera.GeneralObject.endGeneralObject(builder);
        }

        /**
        * @constructor
        */
        SmartCamera.ObjectDetectionData = function () {
            /**
            * @type {flatbuffers.ByteBuffer}
            */
            this.bb = null;

            /**
            * @type {number}
                    */
            this.bb_pos = 0;
        };

        /**
        * @param {number} i
                * @param {flatbuffers.ByteBuffer} bb
                * @returns {SmartCamera.ObjectDetectionData}
                */
        SmartCamera.ObjectDetectionData.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.ObjectDetectionData =} obj
                * @returns {SmartCamera.ObjectDetectionData}
                */
        SmartCamera.ObjectDetectionData.getRootAsObjectDetectionData = function (bb, obj) {
            return (obj || new SmartCamera.ObjectDetectionData).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
                * @param {SmartCamera.ObjectDetectionData =} obj
                * @returns {SmartCamera.ObjectDetectionData}
                */
        SmartCamera.ObjectDetectionData.getSizePrefixedRootAsObjectDetectionData = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.ObjectDetectionData).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {number} index
                * @param {SmartCamera.GeneralObject =} obj
                * @returns {SmartCamera.GeneralObject}
                */
        SmartCamera.ObjectDetectionData.prototype.objectDetectionList = function (index, obj) {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? (obj || new SmartCamera.GeneralObject).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos +
                offset) + index * 4), this.bb) : null;
        };

        /**
        * @returns {number}
                */
        SmartCamera.ObjectDetectionData.prototype.objectDetectionListLength = function () {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? this.bb.__vector_len(this.bb_pos + offset) : 0;
        };

        /**
        * @param {flatbuffers.Builder} builder
                */
        SmartCamera.ObjectDetectionData.startObjectDetectionData = function (builder) {
            builder.startObject(1);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {flatbuffers.Offset} objectDetectionListOffset
                */
        SmartCamera.ObjectDetectionData.addObjectDetectionList = function (builder, objectDetectionListOffset) {
            builder.addFieldOffset(0, objectDetectionListOffset, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
                * @param {Array.< flatbuffers.Offset >} data
                * @returns {flatbuffers.Offset}
                */
        SmartCamera.ObjectDetectionData.createObjectDetectionListVector = function (builder, data) {
            builder.startVector(4, data.length, 4);
            for (var i = data.length - 1; i >= 0; i--) {
                builder.addOffset(data[i]);
            }
            return builder.endVector();
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {number} numElems
            */
        SmartCamera.ObjectDetectionData.startObjectDetectionListVector = function (builder, numElems) {
            builder.startVector(4, numElems, 4);
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @returns {flatbuffers.Offset}
            */
        SmartCamera.ObjectDetectionData.endObjectDetectionData = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {flatbuffers.Offset} objectDetectionListOffset
            * @returns {flatbuffers.Offset}
            */
        SmartCamera.ObjectDetectionData.createObjectDetectionData = function (builder, objectDetectionListOffset) {
            SmartCamera.ObjectDetectionData.startObjectDetectionData(builder);
            SmartCamera.ObjectDetectionData.addObjectDetectionList(builder, objectDetectionListOffset);
            return SmartCamera.ObjectDetectionData.endObjectDetectionData(builder);
        }

        /**
        * @constructor
        */
        SmartCamera.ObjectDetectionTop = function () {
            /**
            * @type {flatbuffers.ByteBuffer}
            */
            this.bb = null;

            /**
            * @type {number}
                */
            this.bb_pos = 0;
        };

        /**
        * @param {number} i
            * @param {flatbuffers.ByteBuffer} bb
            * @returns {SmartCamera.ObjectDetectionTop}
            */
        SmartCamera.ObjectDetectionTop.prototype.__init = function (i, bb) {
            this.bb_pos = i;
            this.bb = bb;
            return this;
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
            * @param {SmartCamera.ObjectDetectionTop =} obj
            * @returns {SmartCamera.ObjectDetectionTop}
            */
        SmartCamera.ObjectDetectionTop.getRootAsObjectDetectionTop = function (bb, obj) {
            return (obj || new SmartCamera.ObjectDetectionTop).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {flatbuffers.ByteBuffer} bb
            * @param {SmartCamera.ObjectDetectionTop =} obj
            * @returns {SmartCamera.ObjectDetectionTop}
            */
        SmartCamera.ObjectDetectionTop.getSizePrefixedRootAsObjectDetectionTop = function (bb, obj) {
            bb.setPosition(bb.position() + flatbuffers.SIZE_PREFIX_LENGTH);
            return (obj || new SmartCamera.ObjectDetectionTop).__init(bb.readInt32(bb.position()) + bb.position(), bb);
        };

        /**
        * @param {SmartCamera.ObjectDetectionData =} obj
            * @returns {SmartCamera.ObjectDetectionData | null}
            */
        SmartCamera.ObjectDetectionTop.prototype.perception = function (obj) {
            var offset = this.bb.__offset(this.bb_pos, 4);
            return offset ? (obj || new SmartCamera.ObjectDetectionData).__init(this.bb.__indirect(this.bb_pos + offset),
                this.bb) : null;
        };

        /**
        * @param {flatbuffers.Builder} builder
            */
        SmartCamera.ObjectDetectionTop.startObjectDetectionTop = function (builder) {
            builder.startObject(1);
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {flatbuffers.Offset} perceptionOffset
            */
        SmartCamera.ObjectDetectionTop.addPerception = function (builder, perceptionOffset) {
            builder.addFieldOffset(0, perceptionOffset, 0);
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @returns {flatbuffers.Offset}
            */
        SmartCamera.ObjectDetectionTop.endObjectDetectionTop = function (builder) {
            var offset = builder.endObject();
            return offset;
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {flatbuffers.Offset} offset
            */
        SmartCamera.ObjectDetectionTop.finishObjectDetectionTopBuffer = function (builder, offset) {
            builder.finish(offset);
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {flatbuffers.Offset} offset
            */
        SmartCamera.ObjectDetectionTop.finishSizePrefixedObjectDetectionTopBuffer = function (builder, offset) {
            builder.finish(offset, undefined, true);
        };

        /**
        * @param {flatbuffers.Builder} builder
            * @param {flatbuffers.Offset} perceptionOffset
            * @returns {flatbuffers.Offset}
            */
        SmartCamera.ObjectDetectionTop.createObjectDetectionTop = function (builder, perceptionOffset) {
            SmartCamera.ObjectDetectionTop.startObjectDetectionTop(builder);
            SmartCamera.ObjectDetectionTop.addPerception(builder, perceptionOffset);
            return SmartCamera.ObjectDetectionTop.endObjectDetectionTop(builder);
        }

        // Exports for Node.js and RequireJS
        this.SmartCamera = SmartCamera;
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const schemas = {
                "hifi": `// version 1.0.0 

namespace NeuralaRecognizer;

table HifiResults {
    width:uint;
    height:uint;
    anomalyScore:float;
    heatmap:[float];
}

root_type HifiResults;`,
                "classifier": `namespace SmartCamera;

table GeneralClassification {
  class_id:uint;
  score:float;
}

table ClassificationData {
  classification_list:[GeneralClassification];
}

table ClassificationTop {
  perception:ClassificationData;
}

root_type ClassificationTop;`,
                "detector": `namespace SmartCamera;

table BoundingBox2d {
  left:int;
  top:int;
  right:int;
  bottom:int;
}

union BoundingBox {
  BoundingBox2d,
}

table GeneralObject {
  class_id:uint;
  bounding_box:BoundingBox;
  score:float;
}

table ObjectDetectionData {
  object_detection_list:[GeneralObject];
}

table ObjectDetectionTop {
  perception:ObjectDetectionData;
}

root_type ObjectDetectionTop;`
            };

            const schemaSelect = document.getElementById('schemaSelect');
            Object.keys(schemas).forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = key;
                schemaSelect.appendChild(option);
            });

            document.getElementById("decodeButton").addEventListener("click", () => {
                const jsonInput = document.getElementById("jsonInput").value;
                try {
                    const jsonObj = JSON.parse(jsonInput);
                    if (jsonObj.Inferences) {
                        const schemaKey = schemaSelect.value;
                        const schema = schemas[schemaKey];

                        // Base64 decode
                        const base64String = jsonObj.Inferences[0].O;
                        const binaryString = atob(base64String);
                        const len = binaryString.length;
                        const bytes = new Uint8Array(len);
                        for (let i = 0; i < len; i++) {
                            bytes[i] = binaryString.charCodeAt(i);
                        }

                        // Parse Flatbuffer and convert to JSON
                        const buffer = new flatbuffers.ByteBuffer(bytes);
                        let output = convertFlatbufferToJson(buffer, schemaKey);

                        const outputBox = document.getElementById("outputBox");
                        outputBox.textContent = `Decoded using ${schemaKey}:
` + JSON.stringify(output, null, 2);
                    } else {
                        throw new Error("Missing 'data' object with base64 encoded string.");
                    }
                } catch (error) {
                    alert("Invalid input: " + error.message);
                }
            });

            function convertFlatbufferToJson(buffer, schemaKey) {
                switch (schemaKey) {
                    case "detector":
                        const objectDetectionTop = SmartCamera.ObjectDetectionTop.getRootAsObjectDetectionTop(buffer);
                        return objectDetectionTopToJson(objectDetectionTop);
                    case "classifier":
                        const classificationTop = SmartCamera.ClassificationTop.getRootAsClassificationTop(buffer);
                        return classificationTopToJson(classificationTop);
                    case "hifi":
                        const hifiResults = NeuralaRecognizer.HifiResults.getRootAsHifiResults(buffer);
                        return hifiResultsToJson(hifiResults);
                    default:
                        return { error: "Schema not supported." };
                }
            }

            function objectDetectionTopToJson(objectDetectionTop) {
                let perception = objectDetectionTop.perception();
                let detectionList = [];
                for (let i = 0; i < perception.objectDetectionListLength(); i++) {
                    let generalObject = perception.objectDetectionList(i);
                    let boundingBox = generalObject.boundingBox(new SmartCamera.BoundingBox2d());
                    detectionList.push({
                        class_id: generalObject.classId(),
                        bounding_box: {
                            left: boundingBox.left(),
                            top: boundingBox.top(),
                            right: boundingBox.right(),
                            bottom: boundingBox.bottom()
                        },
                        score: generalObject.score()
                    });
                }
                return {
                    perception: {
                        object_detection_list: detectionList
                    }
                };
            }

            function classificationTopToJson(classificationTop) {
                let perception = classificationTop.perception();
                let classificationList = [];
                for (let i = 0; i < perception.classificationListLength(); i++) {
                    let generalClassification = perception.classificationList(i);
                    classificationList.push({
                        class_id: generalClassification.classId(),
                        score: generalClassification.score()
                    });
                }
                return {
                    perception: {
                        classification_list: classificationList
                    }
                };
            }

            function hifiResultsToJson(hifiResults) {
                return {
                    width: hifiResults.width(),
                    height: hifiResults.height(),
                    anomalyScore: hifiResults.anomalyScore(),
                    heatmap: Array.from({ length: hifiResults.heatmapLength() }, (_, i) => hifiResults.heatmap(i))
                };
            }
        });
    </script>
</head>


<body>
    <h1>Flatbuffer JSON Decoder</h1>
    <div>
        <label for="schemaSelect">Choose a Schema:</label>
        <select id="schemaSelect">
        </select>
    </div>
    <div>
        <textarea id="jsonInput" rows="10" cols="50"
            placeholder='Enter JSON document containing "data" object encoded with base64'></textarea>
    </div>
    <div>
        <button id="decodeButton">Decode Flatbuffer</button>
    </div>
    <div>
        <h3>Decoded Data:</h3>
        <pre id="outputBox"></pre>
    </div>
</body>

</html>